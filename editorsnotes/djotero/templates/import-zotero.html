{% extends "base.html" %}

{% block js %}
    <script type="text/javascript; e4x=1" src="/media/function/citeproc-js/xmle4x.js"></script> 
    <script type="text/javascript" src="/media/function/citeproc-js/xmldom.js"></script>
    <script type="text/javascript" src="/media/function/citeproc-js/citeproc.js"></script>
    <script type="text/javascript" src="/media/function/citeproc-js/simple.js"></script>
    <script type="text/javascript" src="/media/function/json2.js"></script>
    <script type="text/javascript" src="/media/function/zotero-import.js"></script>
    <script type="text/javascript">
    {% if related_object %}
      var related_object = '{{ related_object }}';
      var related_id = '{{ related_id }}';
    {% endif %}
    </script>
{% endblock %}

{% block css %}
<style type="text/css">
.top-label h6 {padding-bottom: .75em;}
#collections {height: 20em;}
.zotero-link {padding: .25em;}
.zotero-link a {text-decoration: none;}
.add-to-document a {text-decoration: none;}
.zotero-link input {margin-right: .5em; margin-left: .25em;}
#document {padding-bottom: 1em;}
.zotero-link img { {% if not apply_to_docs %}display: none; {% endif %}vertical-align: middle; }
.djotero-list li {
    border: 1px none;
    border-radius: 5px 5px 5px 5px;
    margin: 0.2em;
    padding: 0.4em;
}
.djotero-list li.item-hover {
    background: none repeat scroll 0 0 #EEEEEE;
}
.djotero-list li.item-selected {
    background: #CCCCCC;
}

</style>
{% endblock %}

{% block content %}

{% if zotero_status %}
<div id="access" class="span-24 last">
  <section id="libraries" class="span-8">
    <span class="top-label">
      <h6>Select a library to import from</h6>
    </span>
    <a class="button" href="#" id="get-libraries">Determine access</a>
    <ul id="library-list" class="djotero-list active">
    </ul>
  </section>
  
  <section id="collections" class="span-8 colborder after-library">
    <span class="top-label">
      <h6>Optional: Select a collection from the library</h6>
    </span>
    <a class="button" href="#" id="get-collections">Determine collections</a>
    <ul id="collection-list" class="djotero-list active">
    </ul>
  </section>
  
  <section id="query" class="span-7 last after-library">
    <span class="top-label">
      <h6>&nbsp;</h6>
    </span>
    <div id="items">
        <a class="button" href="#" id="get-items">Get items</a>
    </div>
  </section>
</div>

<div id="items" class="span-16 last" style="display: none">
  <ul id="item-list" class="djotero-list active">{% csrf_token %}
  </ul>
</div>

<div id="doc-add-form">
  <div id="document"></div>
  <div id="docsearch">
    <span>Search for item:<span>
    <input type="text" class="text" name="q"/>
    <a class="button" style="display: none;" id="link-document">Submit</a>
  </div>
</div>

{% else %}
    <p>You have not yet entered Zotero access information. Click on your name in the top navigation bar to do so.</p>
{% endif %}
{% endblock %}
